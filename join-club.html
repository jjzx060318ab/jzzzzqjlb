<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>申请加入俱乐部 - 荆州众志足球俱乐部官方网站</title>
    <!-- Bootstrap CSS -->
    <link href="css/bootstrap-4.4.1.css" rel="stylesheet">
    <!-- 自定义样式 -->
    <link href="css/custom-style.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    
    <style>
        /* 申请加入页面特定样式 */
        .join-form-container {
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin-top: 30px;
        }
        
        .form-section {
            margin-bottom: 30px;
        }
        
        .form-label {
            font-weight: 600;
            color: #003366;
            margin-bottom: 8px;
            display: block;
        }
        
        .form-control:focus {
            border-color: #ffc107;
            box-shadow: 0 0 0 0.2rem rgba(255, 193, 7, 0.25);
        }
        
        .join-requirements {
            list-style-type: none;
            padding-left: 0;
        }
        
        .join-requirements li {
            margin-bottom: 15px;
            padding-left: 25px;
            position: relative;
        }
        
        .join-requirements li:before {
            content: "\f058";
            font-family: "Font Awesome 5 Free";
            font-weight: 900;
            color: #28a745;
            position: absolute;
            left: 0;
        }
        
        .application-info {
            background-color: #f8f9fa;
            border-left: 4px solid #003366;
            padding: 15px;
            margin: 20px 0;
        }
        
        @media (max-width: 768px) {
            .join-form-container {
                padding: 20px;
            }
        }
    </style>
</head>

<body>
    <!-- 导航栏 -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="首页.html">
                <img src="images/沙市(1)11_0011(1)(1)(1).png" alt="俱乐部logo"> 荆州众志足球俱乐部
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="首页.html">首页</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="俱乐部介绍.html">俱乐部介绍</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="赛事新闻.html">赛事新闻</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="球员风采.html">球员风采</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="login.html"><i class="fas fa-user"></i> 登录/注册</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- 头部横幅 -->
    <header>
        <div class="container">
            <h1>申请加入俱乐部</h1>
            <p class="lead">展示你的足球才华，成为荆州众志足球俱乐部的一员</p>
        </div>
    </header>

    <!-- 主内容 -->
    <main>
        <div class="container">
            <!-- 招募信息介绍 -->
            <section class="mt-5">
                <div class="card">
                    <div class="card-body">
                        <h2 class="section-title">俱乐部招募信息</h2>
                        <p>荆州众志足球俱乐部致力于发掘和培养足球人才，我们欢迎所有热爱足球、具备一定足球基础的年轻人加入我们的团队。无论你是有经验的球员，还是对足球充满热情的初学者，只要你有梦想、有毅力、有团队精神，我们都期待你的加入！</p>
                        <p>加入我们，你将有机会接受专业的足球训练，参加各类足球赛事，结识志同道合的足球爱好者，共同成长，为荆州足球的发展贡献自己的力量。</p>
                    </div>
                </div>
            </section>

            <!-- 申请条件 -->
            <section class="mt-5">
                <h2 class="section-title">申请条件</h2>
                <div class="card">
                    <div class="card-body">
                        <ul class="join-requirements">
                            <li>年满16周岁，热爱足球运动</li>
                            <li>具备良好的身体条件和足球基础</li>
                            <li>遵守俱乐部规章制度，服从团队管理</li>
                            <li>具有团队合作精神和积极向上的态度</li>
                            <li>能够按时参加训练和比赛活动</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- 申请表单 -->
            <section class="mt-5">
                <div class="join-form-container">
                    <h2 class="section-title text-center">填写申请信息</h2>
                    
                    <div class="application-info">
                        <p><i class="fas fa-info-circle"></i> 请真实填写以下信息，我们将在收到您的申请后3个工作日内与您联系。</p>
                    </div>
                    
                    <form id="joinForm">
                        <!-- 个人信息 -->
                        <div class="form-section">
                            <h3 class="form-section-title">个人信息</h3>
                            <div class="row">
                                <div class="col-md-6">
                                    <label class="form-label" for="fullName">姓名 <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="fullName" name="fullName" required placeholder="请输入您的姓名">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label" for="age">年龄 <span class="text-danger">*</span></label>
                                    <input type="number" class="form-control" id="age" name="age" required min="16" placeholder="请输入您的年龄">
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-6">
                                    <label class="form-label" for="gender">性别 <span class="text-danger">*</span></label>
                                    <select class="form-control" id="gender" name="gender" required>
                                        <option value="">请选择</option>
                                        <option value="male">男</option>
                                        <option value="female">女</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label" for="phone">联系电话 <span class="text-danger">*</span></label>
                                    <input type="tel" class="form-control" id="phone" name="phone" required placeholder="请输入您的联系电话">
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-12">
                                    <label class="form-label" for="email">电子邮箱</label>
                                    <input type="email" class="form-control" id="email" name="email" placeholder="请输入您的电子邮箱（选填）">
                                </div>
                            </div>
                        </div>

                        <!-- 足球经历 -->
                        <div class="form-section">
                            <h3 class="form-section-title">足球经历</h3>
                            <div class="row">
                                <div class="col-md-12">
                                    <label class="form-label" for="footballExperience">足球经验 <span class="text-danger">*</span></label>
                                    <textarea class="form-control" id="footballExperience" name="footballExperience" rows="4" required placeholder="请详细描述您的足球经历，包括：踢球年限、曾效力的球队、参加过的比赛等"></textarea>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-6">
                                    <label class="form-label" for="preferredPosition">擅长位置 <span class="text-danger">*</span></label>
                                    <select class="form-control" id="preferredPosition" name="preferredPosition" required>
                                        <option value="">请选择</option>
                                        <option value="goalkeeper">守门员</option>
                                        <option value="defender">后卫</option>
                                        <option value="midfielder">中场</option>
                                        <option value="forward">前锋</option>
                                        <option value="other">其他</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label" for="skillLevel">自评估球技水平 <span class="text-danger">*</span></label>
                                    <select class="form-control" id="skillLevel" name="skillLevel" required>
                                        <option value="">请选择</option>
                                        <option value="beginner">初学者</option>
                                        <option value="intermediate">中级</option>
                                        <option value="advanced">高级</option>
                                        <option value="professional">专业</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- 其他信息 -->
                        <div class="form-section">
                            <h3 class="form-section-title">其他信息</h3>
                            <div class="row">
                                <div class="col-md-12">
                                    <label class="form-label" for="availability">可参加训练的时间 <span class="text-danger">*</span></label>
                                    <textarea class="form-control" id="availability" name="availability" rows="2" required placeholder="请说明您一周中可以参加训练的具体时间"></textarea>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-12">
                                    <label class="form-label" for="additionalInfo">补充说明</label>
                                    <textarea class="form-control" id="additionalInfo" name="additionalInfo" rows="2" placeholder="请提供任何其他您认为重要的信息（选填）"></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- 隐私声明 -->
                        <div class="form-section">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="privacyAgree" name="privacyAgree" required>
                                <label class="form-check-label" for="privacyAgree">
                                    我同意荆州众志足球俱乐部根据<a href="#" class="text-primary">隐私政策</a>收集和使用我的个人信息用于申请处理。
                                </label>
                            </div>
                        </div>

                        <!-- 提交按钮 -->
                        <div class="text-center mt-5">
                            <button type="submit" class="btn btn-primary btn-lg" id="submitBtn">
                                <i class="fas fa-paper-plane"></i> 提交申请
                            </button>
                        </div>
                        
                        <!-- 表单进度指示器 -->
                        <div class="form-progress mt-4">
                            <div class="progress">
                                <div class="progress-bar bg-primary" id="formProgressBar" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                            <div class="progress-text text-center mt-2 text-sm text-muted">
                                <span id="progressText">已填写 0/9 项</span>
                            </div>
                        </div>
                    </form>
                </div>
            </section>
        </div>
    </main>

    <!-- 页脚 -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3><i class="fas fa-futbol"></i> 荆州众志足球俱乐部</h3>
                    <p>激情、团队、梦想 - 荆州足球的骄傲</p>
                </div>
                <div class="footer-section">
                    <h3>联系我们</h3>
                    <p><i class="fas fa-map-marker-alt"></i> 湖北省荆州市沙市区</p>
                    <p><i class="fas fa-phone"></i> 联系电话：0716-xxxxxxx</p>
                    <p><i class="fas fa-envelope"></i> 邮箱：grunt10123@outlook.com</p>
                </div>
                <div class="footer-section">
                    <h3>关注我们</h3>
                    <div class="social-links">
                        <a href="#" class="btn btn-outline-light btn-sm"><i class="fab fa-weixin"></i> 微信公众号</a>
                        <a href="#" class="btn btn-outline-light btn-sm"><i class="fab fa-weibo"></i> 微博</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 荆州众志足球俱乐部. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="js/jquery-3.4.1.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap-4.4.1.js"></script>
    <!-- 用户认证功能 -->
    <script src="js/auth.js"></script>
    <!-- 音乐播放器功能 -->
    <script src="js/music-player.js"></script>
    <!-- 微信公众号设置 -->
    <script src="js/wechat-setup.js"></script>
    <!-- 微博设置 -->
    <script src="js/weibo-setup.js"></script>
    
    <script>
        // 初始化页面增强功能
        document.addEventListener('DOMContentLoaded', function() {
            // 等待音乐播放器脚本加载完成
            setTimeout(function() {
                if (typeof initPageEnhancements === 'function') {
                    initPageEnhancements();
                }
            }, 500);
            
            // 表单提交处理
            const joinForm = document.getElementById('joinForm');
            const submitBtn = document.getElementById('submitBtn');
            const progressBar = document.getElementById('formProgressBar');
            const progressText = document.getElementById('progressText');
            
            // 定义必填字段
            const requiredFields = [
                'fullName', 'age', 'gender', 'phone', 'footballExperience', 
                'preferredPosition', 'skillLevel', 'availability', 'privacyAgree'
            ];
            
            // 表单填写进度跟踪
            function updateFormProgress() {
                let completedFields = 0;
                
                requiredFields.forEach(fieldId => {
                    const field = document.getElementById(fieldId);
                    if (field) {
                        if (field.type === 'checkbox') {
                            if (field.checked) completedFields++;
                        } else if (field.value.trim() !== '') {
                            completedFields++;
                        }
                    }
                });
                
                const progressPercentage = Math.round((completedFields / requiredFields.length) * 100);
                progressBar.style.width = progressPercentage + '%';
                progressBar.setAttribute('aria-valuenow', progressPercentage);
                progressText.textContent = `已填写 ${completedFields}/${requiredFields.length} 项`;
                
                // 更改进度条颜色以表示不同进度阶段
                if (progressPercentage < 33) {
                    progressBar.className = 'progress-bar bg-primary';
                } else if (progressPercentage < 66) {
                    progressBar.className = 'progress-bar bg-info';
                } else if (progressPercentage < 100) {
                    progressBar.className = 'progress-bar bg-warning';
                } else {
                    progressBar.className = 'progress-bar bg-success';
                }
            }
            
            // 为必填字段添加实时验证
            requiredFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) {
                    // 为文本输入框和选择框添加input事件监听
                    if (field.type !== 'checkbox') {
                        field.addEventListener('input', function() {
                            validateField(fieldId);
                            updateFormProgress();
                        });
                    } else {
                        // 为复选框添加change事件监听
                        field.addEventListener('change', function() {
                            validateField(fieldId);
                            updateFormProgress();
                        });
                    }
                }
            });
            
            // 验证单个字段
            function validateField(fieldId) {
                const field = document.getElementById(fieldId);
                const value = field.value.trim();
                let error = '';
                
                // 移除之前的错误提示
                removeError(field);
                
                // 根据字段类型和ID执行不同的验证
                switch(fieldId) {
                    case 'fullName':
                        if (!value) {
                            error = '请输入您的姓名';
                        }
                        break;
                    case 'age':
                        if (!value || value < 16 || value > 60) {
                            error = '请输入有效的年龄（16-60岁）';
                        }
                        break;
                    case 'phone':
                        if (!value || !/^1[3-9]\d{9}$/.test(value)) {
                            error = '请输入有效的手机号码';
                        }
                        break;
                    case 'email':
                        if (value && !/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/.test(value)) {
                            error = '请输入有效的邮箱地址';
                        }
                        break;
                    case 'footballExperience':
                        if (!value) {
                            error = '请描述您的足球经历';
                        } else if (value.length < 10) {
                            error = '请详细描述您的足球经历';
                        }
                        break;
                    case 'preferredPosition':
                        if (!value) {
                            error = '请选择您擅长的位置';
                        }
                        break;
                    case 'skillLevel':
                        if (!value) {
                            error = '请评估您的球技水平';
                        }
                        break;
                    case 'availability':
                        if (!value) {
                            error = '请说明您可参加训练的时间';
                        }
                        break;
                    case 'privacyAgree':
                        if (!field.checked) {
                            error = '请同意隐私政策以提交申请';
                        }
                        break;
                }
                
                // 如果有错误，显示错误提示
                if (error) {
                    showError(field, error);
                    return false;
                }
                return true;
            }
            
            // 显示错误消息
            function showError(element, message) {
                // 检查是否已有错误消息元素
                let errorElement = element.parentElement.querySelector('.error-message');
                
                if (!errorElement) {
                    errorElement = document.createElement('div');
                    errorElement.className = 'error-message text-danger mt-1 text-sm';
                    
                    // 根据元素类型添加不同的位置
                    if (element.type === 'checkbox') {
                        element.parentElement.appendChild(errorElement);
                    } else {
                        element.parentElement.appendChild(errorElement);
                    }
                }
                
                errorElement.textContent = message;
                element.classList.add('border-danger');
                element.classList.add('is-invalid');
            }
            
            // 移除错误消息
            function removeError(element) {
                const errorElement = element.parentElement.querySelector('.error-message');
                if (errorElement) {
                    errorElement.remove();
                }
                element.classList.remove('border-danger');
                element.classList.remove('is-invalid');
            }
            
            // 提交表单时的验证
            function validateForm() {
                let isValid = true;
                
                requiredFields.forEach(fieldId => {
                    if (!validateField(fieldId)) {
                        isValid = false;
                    }
                });
                
                return isValid;
            }
            
            // 表单提交处理
            if (joinForm && submitBtn) {
                let isSubmitting = false;
                
                joinForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // 防止重复提交
                    if (isSubmitting) return;
                    
                    // 验证表单
                    if (!validateForm()) {
                        // 滚动到第一个错误的字段
                        const firstErrorField = document.querySelector('.is-invalid') || 
                                              document.querySelector('.error-message').previousElementSibling;
                        if (firstErrorField) {
                            firstErrorField.scrollIntoView({ behavior: 'smooth', block: 'center' });
                            firstErrorField.focus();
                        }
                        return;
                    }
                    
                    // 设置提交状态
                    isSubmitting = true;
                    submitBtn.disabled = true;
                    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 提交中...';
                    
                    // 收集表单数据
                    const applicationData = {
                        id: generateApplicationId(),
                        name: document.getElementById('fullName').value.trim(),
                        age: parseInt(document.getElementById('age').value),
                        gender: document.getElementById('gender').value,
                        phone: document.getElementById('phone').value.trim(),
                        email: document.getElementById('email').value.trim() || '未提供',
                        experienceYears: extractExperienceYears(document.getElementById('footballExperience').value),
                        preferredPosition: getPositionLabel(document.getElementById('preferredPosition').value),
                        skillLevel: getSkillLevelLabel(document.getElementById('skillLevel').value),
                        competitionExperience: document.getElementById('footballExperience').value.toLowerCase().includes('比赛') || 
                                              document.getElementById('footballExperience').value.toLowerCase().includes('联赛'),
                        experienceDescription: document.getElementById('footballExperience').value.trim(),
                        availableTimes: document.getElementById('availability').value.trim(),
                        trainingFrequency: countTrainingDays(document.getElementById('availability').value),
                        selfIntroduction: document.getElementById('additionalInfo').value.trim() || '未提供',
                        timestamp: new Date().toISOString(),
                        status: 'pending' // 初始状态为待处理
                    };
                    
                    // 保存到localStorage
                    saveApplicationToLocalStorage(applicationData);
                    
                    // 模拟网络延迟
                    setTimeout(function() {
                        // 显示成功消息
                        showSuccessMessage();
                        
                        // 重置表单
                        joinForm.reset();
                        updateFormProgress();
                        
                        // 恢复提交按钮状态
                        isSubmitting = false;
                        submitBtn.disabled = false;
                        submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> 提交申请';
                    }, 1500);
                });
            }
            
            // 显示成功消息
            function showSuccessMessage() {
                // 创建成功消息元素
                const successMessage = document.createElement('div');
                successMessage.className = 'alert alert-success alert-dismissible fade show fixed-top';
                successMessage.style.top = '20px';
                successMessage.style.left = '50%';
                successMessage.style.transform = 'translateX(-50%)';
                successMessage.style.zIndex = '1000';
                successMessage.style.maxWidth = '500px';
                successMessage.innerHTML = `
                    <i class="fas fa-check-circle mr-2"></i>
                    申请已提交成功！我们将在3个工作日内与您联系。
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                `;
                
                // 添加到页面
                document.body.appendChild(successMessage);
                
                // 自动关闭消息
                setTimeout(function() {
                    successMessage.classList.remove('show');
                    setTimeout(function() {
                        if (successMessage.parentNode === document.body) {
                            document.body.removeChild(successMessage);
                        }
                    }, 300);
                }, 5000);
                
                // 关闭按钮事件
                const closeBtn = successMessage.querySelector('.close');
                if (closeBtn) {
                    closeBtn.addEventListener('click', function() {
                        successMessage.classList.remove('show');
                        setTimeout(function() {
                            if (successMessage.parentNode === document.body) {
                                document.body.removeChild(successMessage);
                            }
                        }, 300);
                    });
                }
            }
            
            // 生成唯一的申请ID
            function generateApplicationId() {
                const timestamp = Date.now();
                const random = Math.floor(Math.random() * 1000);
                return `APP-${timestamp}-${random}`;
            }
            
            // 从足球经历中提取踢球年限
            function extractExperienceYears(experienceText) {
                const yearMatch = experienceText.match(/(\d+)年/);
                if (yearMatch && yearMatch[1]) {
                    return parseInt(yearMatch[1]) + '年';
                }
                return '未明确';
            }
            
            // 获取位置的中文标签
            function getPositionLabel(positionValue) {
                const positionMap = {
                    'goalkeeper': '守门员',
                    'defender': '后卫',
                    'midfielder': '中场',
                    'forward': '前锋',
                    'other': '其他'
                };
                return positionMap[positionValue] || positionValue;
            }
            
            // 获取球技水平的中文标签
            function getSkillLevelLabel(skillValue) {
                const skillMap = {
                    'beginner': '初学者',
                    'intermediate': '中级',
                    'advanced': '高级',
                    'professional': '专业'
                };
                return skillMap[skillValue] || skillValue;
            }
            
            // 计算每周可训练天数
            function countTrainingDays(availabilityText) {
                const daysOfWeek = ['周一', '周二', '周三', '周四', '周五', '周六', '周日'];
                let count = 0;
                
                daysOfWeek.forEach(day => {
                    if (availabilityText.includes(day)) {
                        count++;
                    }
                });
                
                return count > 0 ? count : 0;
            }
            
            // 保存申请到localStorage
            function saveApplicationToLocalStorage(applicationData) {
                try {
                    // 获取已有的申请列表
                    let applications = JSON.parse(localStorage.getItem('joinClubApplications')) || [];
                    
                    // 添加新的申请
                    applications.push(applicationData);
                    
                    // 保存回localStorage
                    localStorage.setItem('joinClubApplications', JSON.stringify(applications));
                    return true;
                } catch (e) {
                    console.error('保存申请数据失败:', e);
                    return false;
                }
            }
            
            // 初始化表单进度
            updateFormProgress();
        });
    </script>
</body>
</html>